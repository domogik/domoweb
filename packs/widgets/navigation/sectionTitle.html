<dom-module id="dmw-navigation-sectiontitle" extends="dmw-widget">
    <template id="extended-styles">
        <style type="text/css">
            :host {
                height: 100%;
                padding: 5px;
            }
            :host #labelprimary {
                position: relative;
                top: 50%;
                -webkit-transform: translateY(-50%);
                -ms-transform: translateY(-50%);
                transform: translateY(-50%);
                overflow: hidden;
                display: inline-block;
            }
            :host #labelsecondary {
                position: absolute;
                bottom: 5px;
                right: 5px;
                font-style: italic;
            }
        </style>
    </template>
    <script>
    (function () {
        let memoizedTemplate;

        class DmwNavigationSectionTitle extends DmwWidget {
            static get is () { return 'dmw-navigation-sectiontitle';}
            static get template() {
              if (!memoizedTemplate) {
                // start with clone of superclass template
                memoizedTemplate = DmwWidget.template.cloneNode(true);
                // get some stuff you want to insert into super template
                const subStyle = Polymer.DomModule.import(this.is, 'template#extended-styles').content;
                // insert stuff in template after the super template's <style>
                const superStyle = memoizedTemplate.content.querySelector('style');
                superStyle.parentNode.insertBefore(subStyle, superStyle.nextSibling);
              }
              return memoizedTemplate;
            }

            constructor() {
                super();
                this.section = document.getElementById('currentsection');
            }
            loadingDone() {
                this.setSection();
            }
            optionsUpdated() {
                this.setSection();
            }
            setSection() {
                this.section.addEventListener('section-updated', this.sectionUpdated.bind(this));
                this.sectionUpdated();
            }
            sectionUpdated() {
                if (this.options['overrideLabel']) {
                    this.$.labelprimary.innerHTML = this.options['overrideLabel'];
                } else {
                    this.$.labelprimary.innerHTML = this.section.name;
                }
                if (this.options['overrideDescription']) {
                    this.labelsecondary = this.options['overrideDescription'];
                } else {
                    this.labelsecondary = this.section.description;
                }
                this.adjustText(this, this.$.labelprimary);
            }
	    };
    customElements.define(DmwNavigationSectionTitle.is, DmwNavigationSectionTitle);
    })();

    </script>
</dom-module>
