<style>
/* NEW 2.0 */
@font-face {
  font-family: 'weathericons';
  src: url('/widget/weather/weather-icons-master-2.0/font/weathericons-regular-webfont.eot');
  src: url('/widget/weather/weather-icons-master-2.0/font/weathericons-regular-webfont.eot?#iefix') format('embedded-opentype'), url('/widget/weather/weather-icons-master-2.0/font/weathericons-regular-webfont.woff2') format('woff2'), url('/widget/weather/weather-icons-master-2.0/font/weathericons-regular-webfont.woff') format('woff'), url('/widget/weather/weather-icons-master-2.0/font/weathericons-regular-webfont.ttf') format('truetype'), url('/widget/weather/weather-icons-master-2.0/font/weathericons-regular-webfont.svg#weather_iconsregular') format('svg');
  font-weight: normal;
  font-style: normal;
}

</style>
<dom-module id="dmw-weather-forecast">
    <template id="extended-styles">
        <link rel="stylesheet" href="/widget/weather/weather-icons-master-2.0/css/weather-icons.css">
        <style type="text/css">
            :host {
                height: 100%;
                display: block;
            }
            .today {
                height: 48%;
            }
            .today .day {
                font-size: calc(1.8em*var(--wscale-h));
                margin-left: calc(0.2em*var(--wscale-w));
                margin-top: calc(0.2em*var(--wscale-h));
            }
            .today .condition {
                float: right;
                font-size: calc(4.5em*var(--wscale-h));
                margin-right: calc(0.2em*var(--wscale-w));
                margin-top: 0em;
            }
            .today .condition .ufo {
                font-size: calc(0.2em*var(--wscale-h));
                margin-top: calc(-1em*var(--wscale-h));
            }
            .today .temperatures i {
                float: left;
                font-size: calc(3.8em*var(--wscale-h));
                margin-left: calc(0.3em*var(--wscale-w));
                margin-right: calc(0.3em*var(--wscale-w));
            }
            .today .temperature {
                margin-left: calc(1em*var(--wscale-w));
                font-size: calc(1.3em*var(--wscale-h));
            }
            .forecast {
                text-align: center;
                float: left;
                width: 25%;
                border: 1ps solid red;
            }
            .forecast .condition {
                font-size: calc(2.5em*var(--wscale-h));
            }
            .forecast .day {
                font-size: calc(1.3em*var(--wscale-h));
            }
            .forecast .temperature {
                font-size: calc(1.3em*var(--wscale-h));
                position: relative;
                bottom: calc(0.5em*var(--wscale-h));
            }
            </style>
        <slot>
            <dmw-sensor id='forecast_0_day' sensorkey="forecast_0_day" sensorvalue="{{forecast_0_day_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_0_condition_code' sensorkey="forecast_0_condition_code" sensorvalue="{{forecast_0_condition_code_value}}" sensornotified="day_0"></dmw-sensor>
            <dmw-sensor id='forecast_0_temperature_high' sensorkey="forecast_0_temperature_high" sensorvalue="{{forecast_0_temperature_high_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_0_temperature_low' sensorkey="forecast_0_temperature_low" sensorvalue="{{forecast_0_temperature_low_value}}"></dmw-sensor>

            <dmw-sensor id='forecast_1_day' sensorkey="forecast_1_day" sensorvalue="{{forecast_1_day_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_1_condition_code' sensorkey="forecast_1_condition_code" sensorvalue="{{forecast_1_condition_code_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_1_temperature_high' sensorkey="forecast_1_temperature_high" sensorvalue="{{forecast_1_temperature_high_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_1_temperature_low' sensorkey="forecast_1_temperature_low" sensorvalue="{{forecast_1_temperature_low_value}}"></dmw-sensor>

            <dmw-sensor id='forecast_2_day' sensorkey="forecast_2_day" sensorvalue="{{forecast_2_day_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_2_condition_code' sensorkey="forecast_2_condition_code" sensorvalue="{{forecast_2_condition_code_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_2_temperature_high' sensorkey="forecast_2_temperature_high" sensorvalue="{{forecast_2_temperature_high_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_2_temperature_low' sensorkey="forecast_2_temperature_low" sensorvalue="{{forecast_2_temperature_low_value}}"></dmw-sensor>

            <dmw-sensor id='forecast_3_day' sensorkey="forecast_3_day" sensorvalue="{{forecast_3_day_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_3_condition_code' sensorkey="forecast_3_condition_code" sensorvalue="{{forecast_3_condition_code_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_3_temperature_high' sensorkey="forecast_3_temperature_high" sensorvalue="{{forecast_3_temperature_high_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_3_temperature_low' sensorkey="forecast_3_temperature_low" sensorvalue="{{forecast_3_temperature_low_value}}"></dmw-sensor>

            <dmw-sensor id='forecast_4_day' sensorkey="forecast_4_day" sensorvalue="{{forecast_4_day_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_4_condition_code' sensorkey="forecast_4_condition_code" sensorvalue="{{forecast_4_condition_code_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_4_temperature_high' sensorkey="forecast_4_temperature_high" sensorvalue="{{forecast_4_temperature_high_value}}"></dmw-sensor>
            <dmw-sensor id='forecast_4_temperature_low' sensorkey="forecast_4_temperature_low" sensorvalue="{{forecast_4_temperature_low_value}}"></dmw-sensor>
        </slot>

        <div class="today" id="day_0">
          <div class="condition" id="forecast_0_condition_code">{{forecast_0_condition_code}}</div>
          <div class="day" id="forecast_0_day">{{ today }}</div>
          <div class="temperatures">
            <i class="wi wi-thermometer"></i>
            <div class="temperature">
              {{ high }} :
              <span id="forecast_0_temperature_high">{{forecast_0_temperature_high}}</span>
            </div>
            <div class="temperature">
              {{ low }} :
              <span id="forecast_0_temperature_low">{{forecast_0_temperature_low}}</span>
            </div>
          </div>
        </div>

        <div class="forecast" id="day_1">
          <div class="day" id="forecast_1_day">{{forecast_1_day}}</div>
          <div class="condition" id="forecast_1_condition_code">{{forecast_1_condition_code}}</div>
          <div class="temperature">
            <span id="forecast_1_temperature_high">{{forecast_1_temperature_high}}</span>
            |
            <span id="forecast_1_temperature_low">{{forecast_1_temperature_low}}</span>
          </div>
        </div>

        <div class="forecast" id="day_2">
          <div class="day" id="forecast_2_day">{{forecast_2_day}}</div>
          <div class="condition" id="forecast_2_condition_code">{{forecast_2_condition_code}}</div>
          <div class="temperature">
            <span id="forecast_2_temperature_high">{{forecast_2_temperature_high}}</span>
            |
            <span id="forecast_2_temperature_low">{{forecast_2_temperature_low}}</span>
          </div>
        </div>

        <div class="forecast" id="day_3">
          <div class="day" id="forecast_3_day">{{forecast_3_day}}</div>
          <div class="condition" id="forecast_3_condition_code">{{forecast_3_condition_code}}</div>
          <div class="temperature">
            <span id="forecast_3_temperature_high">{{forecast_3_temperature_high}}</span>
            |
            <span id="forecast_3_temperature_low">{{forecast_3_temperature_low}}</span>
          </div>
        </div>

        <div class="forecast" id="day_4">
          <div class="day" id="forecast_4_day">{{forecast_4_day}}</div>
          <div class="condition" id="forecast_4_condition_code">{{forecast_4_condition_code}}</div>
          <div class="temperature">
            <span id="forecast_4_temperature_high">{{forecast_4_temperature_high}}</span>
            |
            <span id="forecast_4_temperature_low">{{forecast_4_temperature_low}}</span>
          </div>
        </div>

    </template>
    <script>
     (function () {
        let memoizedTemplate;

        class DmwWeatherForecast extends DmwWidget {
            static get is () { return 'dmw-weather-forecast' ;}
            static get properties() {
                return {
                    forecast_0_condition_code_value: {
                        notify: true,
                        observer: 'forecast_0_condition_code_valueChanged'
                    },
                    forecast_0_temperature_high_value: {
                        notify: true,
                        observer: 'forecast_0_temperature_high_valueChanged'
                    },
                    forecast_0_temperature_low_value: {
                        notify: true,
                        observer: 'forecast_0_temperature_low_valueChanged'
                    },
                    forecast_1_day_value: {
                        notify: true,
                        observer: 'forecast_1_day_valueChanged'
                    },
                    forecast_1_condition_code_value: {
                        notify: true,
                        observer: 'forecast_1_condition_code_valueChanged'
                    },
                    forecast_1_temperature_high_value: {
                        notify: true,
                        observer: 'forecast_1_temperature_high_valueChanged'
                    },
                    forecast_1_temperature_low_value: {
                        notify: true,
                        observer: 'forecast_1_temperature_low_valueChanged'
                    },
                    forecast_2_day_value: {
                        notify: true,
                        observer: 'forecast_2_day_valueChanged'
                    },
                    forecast_2_condition_code_value: {
                        notify: true,
                        observer: 'forecast_2_condition_code_valueChanged'
                    },
                    forecast_2_temperature_high_value: {
                        notify: true,
                        observer: 'forecast_2_temperature_high_valueChanged'
                    },
                    forecast_2_temperature_low_value: {
                        notify: true,
                        observer: 'forecast_2_temperature_low_valueChanged'
                    },
                    forecast_3_day_value: {
                        notify: true,
                        observer: 'forecast_3_day_valueChanged'
                    },
                    forecast_3_condition_code_value: {
                        notify: true,
                        observer: 'forecast_3_condition_code_valueChanged'
                    },
                    forecast_3_temperature_high_value: {
                        notify: true,
                        observer: 'forecast_3_temperature_high_valueChanged'
                    },
                    forecast_3_temperature_low_value: {
                        notify: true,
                        observer: 'forecast_3_temperature_low_valueChanged'
                    },
                    forecast_4_day_value: {
                        notify: true,
                        observer: 'forecast_4_day_valueChanged'
                    },
                    forecast_4_condition_code_value: {
                        notify: true,
                        observer: 'forecast_4_condition_code_valueChanged'
                    },
                    forecast_4_temperature_high_value: {
                        notify: true,
                        observer: 'forecast_4_temperature_high_valueChanged'
                    },
                    forecast_4_temperature_low_value: {
                        notify: true,
                        observer: 'forecast_4_temperature_low_valueChanged'
                    }
                }
            }
            static get template() {
              if (!memoizedTemplate) {
                // start with clone of superclass template
                memoizedTemplate = DmwWidget.template.cloneNode(true);
                // get some stuff you want to insert into super template
                const subStyle = Polymer.DomModule.import(this.is, 'template#extended-styles').content;
                // insert stuff in template after the super template's <style>
                const superStyle = memoizedTemplate.content.querySelector('style');
                superStyle.parentNode.insertBefore(subStyle, superStyle.nextSibling);
              }
              return memoizedTemplate;
            }
            connectedCallback() {
                super.connectedCallback();
            }

            languageLoaded() {
                this.easterEggDay = new Date().getFullYear() + "-04-01";
                this.today = this.localize("weather:Today");// "Today");
                this.high = this.localize("weather:High"); //, "High");
                this.low = this.localize("weather:Low"); //, "Low");
                this.forecast_1_day = this.localize("weather:" + this.forecast_1_day)
                this.forecast_2_day = this.localize("weather:" + this.forecast_2_day)
                this.forecast_3_day = this.localize("weather:" + this.forecast_3_day)
                this.forecast_4_day = this.localize("weather:" + this.forecast_4_day)
            }
            forecast_0_condition_code_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                /* easter egg inside ;)
                   on each 1st april : ufo alert */

                if (moment().isSame(this.easterEggDay, 'day')) {
                    this.$.forecast_0_condition_code.innerHTML = '<i class="wi wi-alien"></i><div class="ufo">UFO alert!</div>';
                }
                else {
                    this.$.forecast_0_condition_code.innerHTML = setWeatherIcon(newValue);
                }
            }
            forecast_0_temperature_high_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_0_temperature_high = newValue
            }
            forecast_0_temperature_low_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_0_temperature_low = newValue
            }

            forecast_1_day_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_1_day = this.localize("weather:" + newValue) || newValue;
            }
            forecast_1_condition_code_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.$.forecast_1_condition_code.innerHTML = setWeatherIcon(newValue)
            }
            forecast_1_temperature_high_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_1_temperature_high = newValue
            }
            forecast_1_temperature_low_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_1_temperature_low = newValue
            }

            forecast_2_day_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_2_day = this.localize("weather:" + newValue) || newValue;
            }
            forecast_2_condition_code_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.$.forecast_2_condition_code.innerHTML = setWeatherIcon(newValue)
            }
            forecast_2_temperature_high_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_2_temperature_high = newValue
            }
            forecast_2_temperature_low_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_2_temperature_low = newValue
            }

            forecast_3_day_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_3_day = this.localize("weather:" + newValue) || newValue;
            }
            forecast_3_condition_code_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.$.forecast_3_condition_code.innerHTML = setWeatherIcon(newValue)
            }
            forecast_3_temperature_high_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_3_temperature_high = newValue
            }
            forecast_3_temperature_low_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_3_temperature_low = newValue
            }

            forecast_4_day_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_4_day = this.localize("weather:" + newValue) || newValue;
            }
            forecast_4_condition_code_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.$.forecast_4_condition_code.innerHTML = setWeatherIcon(newValue)
            }
            forecast_4_temperature_high_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_4_temperature_high = newValue
            }
            forecast_4_temperature_low_valueChanged(newValue, oldValue) {
                newValue = newValue.stored_value;
                this.forecast_4_temperature_low = newValue
            }

	    };

        function setWeatherIcon(condid) {

            switch(condid) {
                case '0': var icon = '<i class="wi wi-tornado"></i>';
                break;
                case '1': var icon = '<i class="wi wi-storm-showers"></i>';
                break;
                case '2': var icon = '<i class="wi wi-tornado"></i>';
                break;
                case '3': var icon = '<i class="wi wi-thunderstorm"></i>';
                break;
                case '4': var icon = '<i class="wi wi-thunderstorm"></i>';
                break;
                case '5': var icon = '<i class="wi wi-snow"></i>';
                break;
                case '6': var icon = '<i class="wi wi-rain-mix"></i>';
                break;
                case '7': var icon = '<i class="wi wi-rain-mix"></i>';
                break;
                case '8': var icon = '<i class="wi wi-sprinkle"></i>';
                break;
                case '9': var icon = '<i class="wi wi-sprinkle"></i>';
                break;
                case '10': var icon = '<i class="wi wi-hail"></i>';
                break;
                case '11': var icon = '<i class="wi wi-showers"></i>';
                break;
                case '12': var icon = '<i class="wi wi-showers"></i>';
                break;
                case '13': var icon = '<i class="wi wi-snow"></i>';
                break;
                case '14': var icon = '<i class="wi wi-storm-showers"></i>';
                break;
                case '15': var icon = '<i class="wi wi-snow"></i>';
                break;
                case '16': var icon = '<i class="wi wi-snow"></i>';
                break;
                case '17': var icon = '<i class="wi wi-hail"></i>';
                break;
                case '18': var icon = '<i class="wi wi-hail"></i>';
                break;
                case '19': var icon = '<i class="wi wi-cloudy-gusts"></i>';
                break;
                case '20': var icon = '<i class="wi wi-fog"></i>';
                break;
                case '21': var icon = '<i class="wi wi-fog"></i>';
                break;
                case '22': var icon = '<i class="wi wi-fog"></i>';
                break;
                case '23': var icon = '<i class="wi wi-cloudy-gusts"></i>';
                break;
                case '24': var icon = '<i class="wi wi-cloudy-windy"></i>';
                break;
                case '25': var icon = '<i class="wi wi-thermometer"></i>';
                break;
                case '26': var icon = '<i class="wi wi-cloudy"></i>';
                break;
                case '27': var icon = '<i class="wi wi-night-cloudy"></i>';
                break;
                case '28': var icon = '<i class="wi wi-day-cloudy"></i>';
                break;
                case '29': var icon = '<i class="wi wi-night-cloudy"></i>';
                break;
                case '30': var icon = '<i class="wi wi-day-cloudy"></i>';
                break;
                case '31': var icon = '<i class="wi wi-night-clear"></i>';
                break;
                case '32': var icon = '<i class="wi wi-day-sunny"></i>';
                break;
                case '33': var icon = '<i class="wi wi-night-clear"></i>';
                break;
                case '34': var icon = '<i class="wi wi-day-sunny-overcast"></i>';
                break;
                case '35': var icon = '<i class="wi wi-hail"></i>';
                break;
                case '36': var icon = '<i class="wi wi-day-sunny"></i>';
                break;
                case '37': var icon = '<i class="wi wi-thunderstorm"></i>';
                break;
                case '38': var icon = '<i class="wi wi-thunderstorm"></i>';
                break;
                case '39': var icon = '<i class="wi wi-thunderstorm"></i>';
                break;
                case '40': var icon = '<i class="wi wi-storm-showers"></i>';
                break;
                case '41': var icon = '<i class="wi wi-snow"></i>';
                break;
                case '42': var icon = '<i class="wi wi-snow"></i>';
                break;
                case '43': var icon = '<i class="wi wi-snow"></i>';
                break;
                case '44': var icon = '<i class="wi wi-cloudy"></i>';
                break;
                case '45': var icon = '<i class="wi wi-lightning"></i>';
                break;
                case '46': var icon = '<i class="wi wi-snow"></i>';
                break;
                case '47': var icon = '<i class="wi wi-thunderstorm"></i>';
                break;
                case '3200': var icon = '<i class="wi wi-cloud"></i>';
                break;
                default: var icon = '<i class="wi wi-cloud"></i>';
                break;
            }

            return icon;
        }
        customElements.define(DmwWeatherForecast.is, DmwWeatherForecast);
    })();
    </script>
</dom-module>
